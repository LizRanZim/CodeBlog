
<button class="button is-danger m-3" id="make-post">Create Post</button>

<h1 class="title">Welcome {{posts.0.user.user_name}}</h1>

{{#each posts as |post| }}

{{!-- <h1 class="title">Welcome {{post.user.user_name}}</h1> --}}

<div class="row align-center mb-5">
    <div class="col-md-9">
       <a href="/posts/{{post.id}}">
         <h1 class="title is-4 has-text-link">{{post_name}}</h1>
        </a>
        <p>{{post.post_description}}</p>
        <h5>Created by: {{post.user.user_name}}</h5>
        <h6>Created on {{format_date post.post_date_created}}</h6>
        <h6>User Id: {{id}}</h6>

          <button class="button is-danger m-3" id="delete-post-btn" data-id={{post.id}}>Delete Post</button>

    </div>
</div>
{{/each}}


<script src="js/dashboard.js"></script>


<script>
    // delete post button handler from 14-28 profile.js
    const delButtonHandler = async (event) => {
    if (event.target.hasAttribute('data-id')) {
      const id = event.target.getAttribute('data-id');
  
      const response = await fetch(`/api/posts/${id}`, {
        method: 'DELETE',
      });
      console.log(`/api/posts/${id}`);

      if (response.ok) {
       
        document.location.replace(`/edit-post/$
        {id}`);
      } else {
        alert('Failed to delete post');
      }
    }
  };

document
    .querySelector('#delete-post-btn')
    .addEventListener('click', delButtonHandler);

</script>